<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CMScables Documentation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
    }
    .header {
      background-color: #f2f2f2;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .header h1 {
      font-size: 40px;
      margin: 0;
    }
    .header p {
      font-size: 14px;
      margin: 0;
    }
    .header img {
      height: 150px;
      margin-left: 0px;
    }
    h1 {
      font-size: 28px;
    }
    ul {
      list-style-type: none;
      padding: 0;
    }
    li {
      margin-bottom: 0px;
    }
    .menu {
      margin-bottom: 0px;
    }
    .menu a {
      display: block;
      margin-bottom: 5px;
      cursor: pointer;
      color: #007bff;
    }
    .important {
      color: red;
      font-weight: bold;
    }
    .section-title {
      margin-top: 1.5em;
      border-bottom: 2px solid #333;
      padding-bottom: 0.5em;
      font-size: 1.2em;
    }
    .pdf-container {
      width: 75%;
      height: 800px;
      overflow-y: auto;
      border: 1px solid #ccc;
      margin-top: 20px;
      display: none;
    }
    .pdf-container embed,
    .pdf-container iframe {
      width: 100%;
      height: 100%;
    }
    .back-button {
      display: none;
      margin-top: 10px;
      cursor: pointer;
      color: #007bff;
      background: none;
      border: none;
      font-size: 16px;
      text-decoration: underline;
    }
    code {
      font-family: monospace;
      background: #f4f4f4;
      padding: 0.2em 0.4em;
      border-radius: 3px;
    }
    .sub-list {
      margin-left: 20px;
    }
  </style>
</head>
<body>

<h1>CMScables Documentation</h1>

<p class="important">DO NOT MODIFY THE TXT FILES PROVIDED BY CEETIS!</p>

<h2 class="section-title">Modes of Operation</h2>
<ol>
  <li>
    AUTOMATIC MODE:
    <p>Processes the results of the most recent test in chronological order. Generates a final report with or without LV/LVR/PHR cables resistance versus time.
    (AUTO_TEST) </p>
  </li>
  <li>
    MANUAL MODE:
    <p>Allows selection of one or more tests by navigating through directories. Options include:</p>
    <ul class="sub-list">
      <li>a- Choosing specific tests from the directory <code>./input/FULL_TEST_su_cavo_ps_pp1_V3</code></li>
      <li>b- Deciding whether to plot results for comparison</li>
      <li>c- Selecting the type of test to plot (continuity, isolation, or both)</li>
      <li>d- Including LV/LVR cables resistance versus time plots</li>
     <li>e- Choose if a final report should be produced</li><p></p>
    </ul>
  </li>
  <li>
    COMMAND LINE MODE   :
    <p>Run CMScables from the command line with:</p>
    <pre><code>./CMScables --input [PATH_TO_TXT_FILE] --mode [OPTION]</code></pre>
    <p>Parameters:</p>
    <ul class="sub-list">
      <li><code>[PATH_TO_TXT_FILE]</code> should be in the format <code>CableXX/NAME_OF_THE_TEST.txt</code></li>
      <li><code>[OPTION]</code> can be 0 (continuity), 1 (isolation), or 2 (both). Default is continuity test.</li>
    </ul>
  </li>
</ol>

<h2 class="section-title">Adding New Tests to Plot</h2>
<ol>
  <li>Copy the <code>.txt</code> file from CEETIS into <code>./input/FULL_TEST_su_cavo_ps_pp1_V3/CABLE_NAME/</code></li>
  <li>Copy the <code>.pdf</code> file into <code>./input/pdf_ceetis/</code></li>
  <li>Copy the <code>.ini</code> files into <code>./input/FULL_TEST_su_cavo_ps_pp1_V3/CABLE_NAME/VALORI/DATE_OF_THE_TEST/</code></li>
</ol>

<h2 class="section-title">Output Includes</h2>
<ol>
  <li>Final report in <code>./output/report/</code></li>
  <li>Plots:
    <ul class="sub-list">
      <li>Saved in <code>./output/plots/SingleCable/</code> if only one test was selected</li>
      <li>Saved in <code>./output/plots/CheckCable/</code> if multiple tests were selected</li>
    </ul>
  </li>
  <li><code>.root</code> file containing all histograms, including those not plotted in the report, in <code>./output/rootFiles/</code></li>
  <li>LV/LVR cables resistance versus time plots in <code>./output/plotsTimeResistence/</code></li>
</ol>
<p>File names are formatted as: <code>TEST_NAME__PROGRAM_EXECUTION_DATE_AND_TIME.pdf</code> or <code>TEST_NAME__PROGRAM_EXECUTION_DATE_AND_TIME.root</code></p>

<h2 class="section-title">Requirements</h2>
<ul>
  <li>root v6.X.X</li>
  <li>Python 3.x</li>
  <li>pyPDF2 for generating the final report</li>
</ul>

<h2 class="section-title">Installation</h2>
<ol>
  <li>Clone the repository:
    <pre><code>git clone https://github.com/ldellape/CMScables</code></pre>
  </li>
  <li>Install pyPDF2:
    <pre><code>pip install pyPDF2</code></pre>
  </li>
  <li>Build the executable:
    <ul class="sub-list">
      <li>For AUTOMATIC MODE:
        <pre><code>make OPTION=AUTO_TEST</code></pre>
      </li>
      <li>For AUTOMATIC MODE with LV resistance versus time:
        <pre><code>make OPTION=AUTO_TEST TIME=YES</code></pre>
      </li>
      <li>For MANUAL MODE:
        <pre><code>make</code></pre>
      </li>
    </ul>
  </li>
</ol>

<h2 class="section-title">Changing Modes</h2>
<ol>
  <li>Clean the build:
    <pre><code>make clean</code></pre>
  </li>
  <li>Rebuild in the desired mode:
    <ul class="sub-list">
      <li>For AUTOMATIC MDOE:
        <pre><code>make OPTION=AUTO_TEST</code></pre>
      </li>
      <li>For AUTOMATIC MODE with LV resistance versus time:
        <pre><code>make OPTION=AUTO_TEST TIME=YES</code></pre>
      </li>
      <li>For MANUAL MODE:
        <pre><code>make</code></pre>
      </li>
    </ul>
  </li>
</ol>

<p>To build the executable in a different directory, use:</p>
<pre><code>make [MODE OPTION] PREFIX=path/to/location/of/executable</code></pre>
<p>Where <code>[MODE OPTION]</code> is <code>OPTION=AUTO_TEST</code>, <code>OPTION=AUTO_TEST TIME=YES</code>, or nothing as described.</p>

<h2 class="section-title">Additional Information</h2>
<p>The script generates temporary files that are automatically deleted. Instruction can be shown also by typing:</p>
<pre><code>./CMScables --doc</code></pre>
<p>or</p>
<pre><code>./CMScables --help</code></pre>

<hr>
Contact: luca.dellapenna@cern.ch or luca.dellapenna@pg.infn.it
</body>

</html>
